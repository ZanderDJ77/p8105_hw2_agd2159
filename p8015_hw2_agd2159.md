P8015_Hw2_agd2159
================
Zander De Jesus
10-04-2023

## Problem 1: FiveThirtyEight Data Cleaning

Begin by importing necessary libraries:

``` r
library(tidyverse)
```

    ## ── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
    ## ✔ dplyr     1.1.3     ✔ readr     2.1.4
    ## ✔ forcats   1.0.0     ✔ stringr   1.5.0
    ## ✔ ggplot2   3.4.3     ✔ tibble    3.2.1
    ## ✔ lubridate 1.9.2     ✔ tidyr     1.3.0
    ## ✔ purrr     1.0.2     
    ## ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
    ## ✖ dplyr::filter() masks stats::filter()
    ## ✖ dplyr::lag()    masks stats::lag()
    ## ℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors

``` r
library(readxl)
```

**Task 1:** Reading in and Cleaning Monthly Political Datasheet

Separating Date into 3 separate columns. Using a secondary month tibble
dataframe in order to join the months from a numeric to a character name
replacement.

``` r
months_df =
  tibble(
    month_num = 1:12,
    month_abb = month.abb,
    month = month.name
  )
months_df
```

    ## # A tibble: 12 × 3
    ##    month_num month_abb month    
    ##        <int> <chr>     <chr>    
    ##  1         1 Jan       January  
    ##  2         2 Feb       February 
    ##  3         3 Mar       March    
    ##  4         4 Apr       April    
    ##  5         5 May       May      
    ##  6         6 Jun       June     
    ##  7         7 Jul       July     
    ##  8         8 Aug       August   
    ##  9         9 Sep       September
    ## 10        10 Oct       October  
    ## 11        11 Nov       November 
    ## 12        12 Dec       December

``` r
pols_df = read_csv("538_Data/pols-month.csv") |> 
  janitor::clean_names() |> 
  separate(col = mon,
           into = c("year", "month_num", "day"),
           sep = "-", 
           convert = TRUE) |> 
  mutate(president = recode(prez_gop, "0" = "Dem", "1" = "Gop", "2" = "Gop")) |> 
  left_join(x = _, y = months_df) |> 
  select(year, month, everything(), -day, -starts_with("prez")) 
```

    ## Rows: 822 Columns: 9
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## dbl  (8): prez_gop, gov_gop, sen_gop, rep_gop, prez_dem, gov_dem, sen_dem, r...
    ## date (1): mon
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.
    ## Joining with `by = join_by(month_num)`

``` r
pols_df
```

    ## # A tibble: 822 × 11
    ##     year month     month_num gov_gop sen_gop rep_gop gov_dem sen_dem rep_dem
    ##    <int> <chr>         <int>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl>
    ##  1  1947 January           1      23      51     253      23      45     198
    ##  2  1947 February          2      23      51     253      23      45     198
    ##  3  1947 March             3      23      51     253      23      45     198
    ##  4  1947 April             4      23      51     253      23      45     198
    ##  5  1947 May               5      23      51     253      23      45     198
    ##  6  1947 June              6      23      51     253      23      45     198
    ##  7  1947 July              7      23      51     253      23      45     198
    ##  8  1947 August            8      23      51     253      23      45     198
    ##  9  1947 September         9      23      51     253      23      45     198
    ## 10  1947 October          10      23      51     253      23      45     198
    ## # ℹ 812 more rows
    ## # ℹ 2 more variables: president <chr>, month_abb <chr>

**Task 2** Import and clean SNP Csv File Main tidying goal is to
reformat and separate the date item from one column list to separate
year, month, day, characteristics. Will join with `months_df` as in
previous task for pols_df.

``` r
snp_df = read_csv("538_Data/snp.csv", col_types = cols(date = col_date(format = "%m/%d/%y")) ) |> 
  janitor::clean_names() |> 
  separate(date, into = c("year", "month_num", "day"), convert = TRUE) |>
  mutate(
    year = if_else(year > 2023, year - 100, year)) |> 
  left_join(x = _, y = months_df) |> 
  select(year, month, close) 
```

    ## Joining with `by = join_by(month_num)`

``` r
snp_df
```

    ## # A tibble: 787 × 3
    ##     year month    close
    ##    <dbl> <chr>    <dbl>
    ##  1  2015 July     2080.
    ##  2  2015 June     2063.
    ##  3  2015 May      2107.
    ##  4  2015 April    2086.
    ##  5  2015 March    2068.
    ##  6  2015 February 2104.
    ##  7  2015 January  1995.
    ##  8  2014 December 2059.
    ##  9  2014 November 2068.
    ## 10  2014 October  2018.
    ## # ℹ 777 more rows

**Task 3** Cleaning Unemployment File, Preparing for Join with two
previously cleaned dataframes.

``` r
unemployment_df = 
  read_csv("538_Data/unemployment.csv") |> 
  rename(year = Year) |> 
  pivot_longer(
    Jan:Dec,
    names_to = "month_abb",
    values_to = "unemployment"
  ) |> 
  left_join(x = _, y = months_df) |> 
  select(year, month, unemployment)
```

    ## Rows: 68 Columns: 13
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## dbl (13): Year, Jan, Feb, Mar, Apr, May, Jun, Jul, Aug, Sep, Oct, Nov, Dec
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.
    ## Joining with `by = join_by(month_abb)`

``` r
unemployment_df
```

    ## # A tibble: 816 × 3
    ##     year month     unemployment
    ##    <dbl> <chr>            <dbl>
    ##  1  1948 January            3.4
    ##  2  1948 February           3.8
    ##  3  1948 March              4  
    ##  4  1948 April              3.9
    ##  5  1948 May                3.5
    ##  6  1948 June               3.6
    ##  7  1948 July               3.6
    ##  8  1948 August             3.9
    ##  9  1948 September          3.8
    ## 10  1948 October            3.7
    ## # ℹ 806 more rows

**Task 4** Final join of all three datasets

``` r
Df_538 = 
  left_join(pols_df, snp_df) |> 
  left_join(x = _, y = unemployment_df)
```

    ## Joining with `by = join_by(year, month)`
    ## Joining with `by = join_by(year, month)`

``` r
str(Df_538)
```

    ## tibble [822 × 13] (S3: tbl_df/tbl/data.frame)
    ##  $ year        : num [1:822] 1947 1947 1947 1947 1947 ...
    ##  $ month       : chr [1:822] "January" "February" "March" "April" ...
    ##  $ month_num   : int [1:822] 1 2 3 4 5 6 7 8 9 10 ...
    ##  $ gov_gop     : num [1:822] 23 23 23 23 23 23 23 23 23 23 ...
    ##  $ sen_gop     : num [1:822] 51 51 51 51 51 51 51 51 51 51 ...
    ##  $ rep_gop     : num [1:822] 253 253 253 253 253 253 253 253 253 253 ...
    ##  $ gov_dem     : num [1:822] 23 23 23 23 23 23 23 23 23 23 ...
    ##  $ sen_dem     : num [1:822] 45 45 45 45 45 45 45 45 45 45 ...
    ##  $ rep_dem     : num [1:822] 198 198 198 198 198 198 198 198 198 198 ...
    ##  $ president   : chr [1:822] "Dem" "Dem" "Dem" "Dem" ...
    ##  $ month_abb   : chr [1:822] "Jan" "Feb" "Mar" "Apr" ...
    ##  $ close       : num [1:822] NA NA NA NA NA NA NA NA NA NA ...
    ##  $ unemployment: num [1:822] NA NA NA NA NA NA NA NA NA NA ...

## Problem 2: Mr. Trashwheel Dataset

The Trashwheel Dataset contains 6 separate sheets across the excel file,
including pages for notes and discussing methodologies. Since this
problem requires only 3 of the 4 trashwheel machines for data
compilation, each trashwheel can be read in as a individualized tibble
dataframe using the `sheet` and `range` arguments of `read_excel`.
Calculations will then be further done on these dataframes before
joining.

``` r
mrtrashwheel = read_excel("Trashwheel_Data/202309 Trash Wheel Collection Data.xlsx",
                             sheet = 1, range = "A2:N587")

professortrash = read_excel("Trashwheel_Data/202309 Trash Wheel Collection Data.xlsx",
                             sheet = 2, range = "A2:M109")

gywndatrash = read_excel("Trashwheel_Data/202309 Trash Wheel Collection Data.xlsx",
                             sheet = 4, range = "A2:L159")
```

Professortrash and Gywnda do not contain a variable column counting the
“Sports Ball” category of trash collected, as Mr Trashwheel does. Gywnda
also lacks a column on Glass Bottles collected, and a significant
portion of Wrappers column is “NA.” Since MrTrashwheel has both the
largest amount of data and the most thorough reporting across its
columns, I believe it will be best to clean the data to fit a lot of the
standards that MrTrashwheel provides before joining.

Starting by cleaning `mrtrashwheel` dataframe. Adding Identifying
Trashwheel Column that can serve as a joining key. The note on Homes
Powered

``` r
mrnew = mrtrashwheel |> 
  mutate(WheelID=c("MrTrashwheel"),.before=Dumpster) |> 
  rename("Homes_Powered" = "Homes Powered*") |> 
  transform(Year = as.numeric(Year))
```

“Use a similar process to import, clean, and organize the data for
Professor Trash Wheel and Gwynnda, and combine these with the Mr. Trash
Wheel dataset to produce a single tidy dataset. To keep track of which
Trash Wheel is which, you may need to add an additional variable to all
datasets before combining.”

## Problem 3:
